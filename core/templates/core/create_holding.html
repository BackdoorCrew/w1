{% extends 'core/base.html' %}
{% load static %}

{% block title %}Criar Holding - W1 Holding Platform{% endblock %}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}
{% block content %}
<section class="questionnaire-section">
    <h2>Criar Sua Holding</h2>
    <p>Responda √†s perguntas abaixo para personalizar sua holding e ver as vantagens.</p>
    {% if form.errors or form.non_field_errors %}
        <div class="error-messages">
            <p>Por favor, corrija os erros abaixo:</p>
            <ul>
                {% for field in form %}
                    {% for error in field.errors %}
                        <li>{{ field.label }}: {{ error }}</li>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
    <form method="post" action="{% url 'create_holding' %}" class="questionnaire-form" id="holding-form">
        {% csrf_token %}
        <h3>Dados Iniciais</h3>
        <div class="form-group">
            {{ form.nome_holding.label_tag }} {{ form.nome_holding }}
        </div>
        <h3>üí∞ Dinheiro em Banco</h3>
        <p>Saber quanto voc√™ tem armazenado em banco ajuda a planejar investimentos e prote√ß√£o patrimonial.</p>
        <div class="form-group">
            {{ form.has_bank_savings.label_tag }} Voc√™ tem dinheiro armazenado em banco? {{ form.has_bank_savings }}
        </div>
        <div id="bank-savings-details" class="details" style="display: none;">
            <div class="form-group">
                {{ form.bank_savings_amount.label_tag }} Qual o valor aproximado (R$)? {{ form.bank_savings_amount }}
            </div>
        </div>
        <h3>üß† Sucess√£o Familiar sem Invent√°rio</h3>
        <p>Evite custos de at√© 20% e anos de espera transferindo cotas da holding aos herdeiros em vida.</p>
        <div class="form-group">
            {{ form.has_heirs.label_tag }} Voc√™ tem herdeiros? {{ form.has_heirs }}
        </div>
        <div id="heirs-details" class="details" style="display: none;">
            <div class="form-group">
                {{ form.heir_count.label_tag }} Quantos herdeiros? {{ form.heir_count }}
            </div>
            <div class="form-group">
                {{ form.has_succession_plan.label_tag }} Voc√™ j√° pensou em como deixar√° seus bens para eles? {{ form.has_succession_plan }}
            </div>
            <div class="form-group">
                {{ form.has_paid_inventory.label_tag }} J√° fez ou pagou por invent√°rio de algum parente? {{ form.has_paid_inventory }}
            </div>
        </div>
        <h3>üß† Economia no Imposto sobre Aluguel</h3>
        <p>Reduza o imposto sobre alugu√©is de at√© 27,5% (pessoa f√≠sica) para cerca de 11,33% (holding).</p>
        <div class="form-group">
            {{ form.has_rental_properties.label_tag }} Voc√™ tem im√≥veis alugados? {{ form.has_rental_properties }}
        </div>
        <div id="rental-details" class="details" style="display: none;">
            <div class="form-group">
                {{ form.rental_property_count.label_tag }} Quantos im√≥veis? {{ form.rental_property_count }}
            </div>
            <div class="form-group">
                {{ form.rental_income_monthly.label_tag }} Qual valor voc√™ recebe de aluguel por m√™s (R$)? {{ form.rental_income_monthly }}
            </div>
            <div class="form-group">
                {{ form.rental_expenses_monthly.label_tag }} Quais despesas voc√™ tem com esses im√≥veis por m√™s (R$)? {{ form.rental_expenses_monthly }}
            </div>
        </div>
        <h3>üß† Prote√ß√£o Patrimonial</h3>
        <p>Proteja seus bens contra a√ß√µes judiciais, d√≠vidas ou div√≥rcios, mantendo-os em nome da holding.</p>
        <div class="form-group">
            {{ form.has_litigation_concerns.label_tag }} Voc√™ tem receio de a√ß√µes judiciais contra voc√™ ou sua empresa? {{ form.has_litigation_concerns }}
        </div>
        <div id="protection-details" class="details" style="display: none;">
            <div class="form-group">
                {{ form.has_legal_issues.label_tag }} J√° teve problemas legais ou est√° em um setor de risco? {{ form.has_legal_issues }}
            </div>
            <div class="form-group">
                {{ form.wants_asset_protection.label_tag }} Voc√™ quer proteger im√≥veis e patrim√¥nios da sua fam√≠lia? {{ form.wants_asset_protection }}
            </div>
            <div class="form-group">
                {{ form.protected_assets.label_tag }} Descreva os bens que deseja proteger: {{ form.protected_assets }}
            </div>
        </div>
        <h3>üß† Economia sobre Lucros Empresariais</h3>
        <p>Centralize lucros de empresas na holding para otimizar impostos e planejar distribui√ß√µes.</p>
        <div class="form-group">
            {{ form.has_companies.label_tag }} Voc√™ √© s√≥cio de empresas? {{ form.has_companies }}
        </div>
        <div id="company-details" class="details" style="display: none;">
            <div class="form-group">
                {{ form.company_count.label_tag }} Quantas empresas? {{ form.company_count }}
            </div>
            <div class="form-group">
                {{ form.company_profit_annual.label_tag }} Qual o lucro anual aproximado delas (R$)? {{ form.company_profit_annual }}
            </div>
            <div class="form-group">
                {{ form.distributes_profits.label_tag }} Voc√™ costuma distribuir lucros ou reinvestir? {{ form.distributes_profits }}
            </div>
        </div>
        <h3>üß† Gest√£o Eficiente de Patrim√¥nio</h3>
        <p>Gerencie todos os seus bens em um √∫nico CNPJ, facilitando vendas e controle financeiro.</p>
        <div class="form-group">
            {{ form.has_multiple_assets.label_tag }} Voc√™ tem muitos bens em seu nome? {{ form.has_multiple_assets }}
        </div>
        <div id="management-details" class="details" style="display: none;">
            <div class="form-group">
                {{ form.wants_efficient_management.label_tag }} Gostaria de facilitar a gest√£o e venda desses bens? {{ form.wants_efficient_management }}
            </div>
            <div class="form-group">
                {{ form.has_management_difficulties.label_tag }} J√° teve dificuldades com controle patrimonial ou burocracias? {{ form.has_management_difficulties }}
            </div>
        
        </div>
        <button type="submit" class="submit-btn">Enviar</button>
    </form>
    <a href="{% url 'dashboard' %}" class="back-link">Voltar ao Dashboard</a>
</section>

<script>
    function toggleDetails(checkboxId, detailsId) {
        const checkbox = document.getElementById(checkboxId);
        const details = document.getElementById(detailsId);
        details.style.display = checkbox.checked ? 'block' : 'none';
    }

    document.getElementById('id_has_bank_savings').addEventListener('change', () => {
        toggleDetails('id_has_bank_savings', 'bank-savings-details');
    });
    document.getElementById('id_has_heirs').addEventListener('change', () => {
        toggleDetails('id_has_heirs', 'heirs-details');
    });
    document.getElementById('id_has_rental_properties').addEventListener('change', () => {
        toggleDetails('id_has_rental_properties', 'rental-details');
    });
    document.getElementById('id_has_litigation_concerns').addEventListener('change', () => {
        toggleDetails('id_has_litigation_concerns', 'protection-details');
    });
    document.getElementById('id_has_companies').addEventListener('change', () => {
        toggleDetails('id_has_companies', 'company-details');
    });
    document.getElementById('id_has_multiple_assets').addEventListener('change', () => {
        toggleDetails('id_has_multiple_assets', 'management-details');
    });
</script>
{% endblock %}