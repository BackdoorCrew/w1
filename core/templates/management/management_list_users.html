{% extends 'management/management_base.html' %}

{% block content %}
    <form method="get" class="filter-form">
        <label for="user_type">Filtrar por tipo:</label>
        <select name="user_type" id="user_type" onchange="this.form.submit()">
            <option value="">Todos</option>
            {% for value, display_name in user_types %}
            <option value="{{ value }}" {% if value == selected_user_type %}selected{% endif %}>{{ display_name }}</option>
            {% endfor %}
        </select>
        <noscript><button type="submit">Filtrar</button></noscript>
    </form>

    <table>
        <thead>
            <tr>
                <th>Email</th>
                <th>Nome Completo</th>
                <th>Tipo</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users_list %}
            <tr>
                <td>{{ user.email }}</td>
                <td>{{ user.get_full_name|default:"Não informado" }}</td>
                <td>{{ user.get_user_type_display }}</td>
                <td>{% if user.is_active %}Ativo{% else %}Inativo{% endif %}</td>
                <td class="action-links">
                    <a href="{% url 'management_user_detail' user.id %}" class="btn btn-secondary">Detalhes</a>
                    {# <a href="{% url 'admin:core_user_change' user.id %}" target="_blank" class="btn">Editar (Admin)</a> #}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">Nenhum usuário encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}